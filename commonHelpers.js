var h=Object.defineProperty;var b=(t,e,a)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var c=(t,e,a)=>(b(t,typeof e!="symbol"?e+"":e,a),a);import{a as E,S as L,i as u}from"./assets/vendor-5401a4b0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();class d{constructor(){this.BASE_URL="https://pixabay.com/api/",this.END_POINT="",this.query=null,this.page=1,this.totalHits=0}async getImages(){const e={q:this.query,image_type:"photo",key:"42190247-000e45a6447d3626b5dd5a4c9",orientation:"horizontal",safesearch:!0,page:this.page,pageSize:this.PAGE_SIZE},a=`${this.BASE_URL}${this.END_POINT}?${e}`;return(await E.get(a,{params:e})).data}}c(d,"PAGE_SIZE",60);const o=new d,m=new L(".js-gallery a.link-item",{navText:["←","→"],closeText:"×",enableKeyboard:!0,captionsData:"alt",captionPosition:"bottom",captionDelay:250}),i={formEl:document.querySelector('.js-search-form[data-id="1"]'),listEl:document.querySelector(".js-gallery"),inputEl:document.querySelector(".js-input"),loaderEl:document.querySelector(".js-loader"),btnLoader:document.querySelector(".js-btn-load")};i.formEl.addEventListener("submit",S);async function S(t){t.preventDefault(),i.loaderEl.style.display="block";const e=t.target.elements.query.value;o.query=e,o.page=1,q();try{const a=await o.getImages(e);o.totalHits=a.totalHits,await p(a),m.refresh(),y()}catch{f()}finally{i.loaderEl.style.display="none",I()}}i.btnLoader.addEventListener("click",P);async function P(t){t.preventDefault(),i.loaderEl.style.display="block",o.page+=1;try{const e=await o.getImages();await p(e),m.refresh(),y()}catch{f()}finally{i.loaderEl.style.display="none"}}function p(t){if(t.hits.length===0)return u.error({message:"Sorry, there are no images matching your search query. Please try again!"});{const e=v(t.hits);i.listEl.innerHTML=e}}function v(t){return t.map(w).join("")}function w(t){const{largeImageURL:e,likes:a,views:n,webformatURL:r,tags:s,comments:l,downloads:g}=t;return`<li class="gallery-item">
    <a class="link-item" href="${e}"><img class="gallery-img" src="${r}" alt="${s}" title=""/></a>
      <div class="info">
        <p class="info-item"><b>Likes</b><br>${a}</p>
        <p class="info-item"><b>Views</b><br>${n}</p>
        <p class="info-item"><b>Comments</b><br>${l}</p>
        <p class="info-item"><b>Downloads</b><br>${g}</p>
      </div>
    </li>`}function q(){i.listEl.innerHTML=""}function I(){i.inputEl.value=null}function f(){u.error({message:"An error occurred. Please try again later."})}function y(){Math.ceil(o.totalHits/o.PAGE_SIZE)===o.page?i.btnLoader.classList.add("hidden"):i.btnLoader.classList.remove("hidden")}
//# sourceMappingURL=commonHelpers.js.map
