{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js"],"sourcesContent":["import axios from 'axios';\n\nexport class PIXABAY_API {\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com/api/';\n    this.END_POINT = '';\n  }\n  getImages(image) {\n    const params = {\n      q: image,\n      image_type: 'photo',\n      key: '42190247-000e45a6447d3626b5dd5a4c9',\n      orientation: 'horizontal',\n      safesearch: true,\n    };\n\n    const url = `${this.BASE_URL}${this.END_POINT}?${params}`;\n    return axios.get(url, { params }).then(res => res.data);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import axios from 'axios';\nimport { PIXABAY_API } from './pixabay-api';\nconst pixabay_api = new PIXABAY_API();\n\nconst gallerySimpleLightbox = new SimpleLightbox('.js-gallery a.link-item', {\n  /* options */\n  navText: ['←', '→'],\n  closeText: '×',\n  enableKeyboard: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  listEl: document.querySelector('.js-gallery'),\n  inputEl: document.querySelector('.js-input'),\n  loaderEl: document.querySelector('.js-loader'),\n};\n\nrefs.formEl.addEventListener('submit', formSubmit);\n\nasync function formSubmit(e) {\n  e.preventDefault();\n  const imgName = e.target.elements.query.value;\n  refs.loaderEl.style.display = 'block';\n  clearGallery();\n  try {\n    const searchData = await pixabay_api.getImages(imgName);\n    await renderImage(searchData);\n    gallerySimpleLightbox.refresh();\n    gallerySimpleLightbox.on('error.simplelightbox', function (e) {\n      console.log(e);\n    });\n  } catch (error) {\n    handleError();\n  } finally {\n    refs.loaderEl.style.display = 'none';\n    clearInput();\n  }\n}\n\nfunction renderImage(data) {\n  if (data.hits.length === 0) {\n    return iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } else {\n    const markup = imagesTemplate(data.hits);\n    refs.listEl.innerHTML = markup;\n  }\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n  const {\n    largeImageURL,\n    likes,\n    views,\n    webformatURL,\n    tags,\n    comments,\n    downloads,\n  } = img;\n\n  return `<li class=\"gallery-item\">\n    <a class=\"link-item\" href=\"${largeImageURL}\"><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b><br>${likes}</p>\n        <p class=\"info-item\"><b>Views</b><br>${views}</p>\n        <p class=\"info-item\"><b>Comments</b><br>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b><br>${downloads}</p>\n      </div>\n    </li>`;\n}\nfunction clearGallery() {\n  refs.listEl.innerHTML = '';\n}\nfunction clearInput() {\n  refs.inputEl.value = null;\n}\nfunction handleError() {\n  iziToast.error({\n    message: 'An error occurred. Please try again later.',\n  });\n}\n"],"names":["PIXABAY_API","image","params","url","axios","res","pixabay_api","gallerySimpleLightbox","SimpleLightbox","refs","formSubmit","e","imgName","clearGallery","searchData","renderImage","handleError","clearInput","data","iziToast","markup","imagesTemplate","images","imageTemplate","img","largeImageURL","likes","views","webformatURL","tags","comments","downloads"],"mappings":"owBAEO,MAAMA,CAAY,CACvB,aAAc,CACZ,KAAK,SAAW,2BAChB,KAAK,UAAY,EAClB,CACD,UAAUC,EAAO,CACf,MAAMC,EAAS,CACb,EAAGD,EACH,WAAY,QACZ,IAAK,qCACL,YAAa,aACb,WAAY,EAClB,EAEUE,EAAM,GAAG,KAAK,QAAQ,GAAG,KAAK,SAAS,IAAID,CAAM,GACvD,OAAOE,EAAM,IAAID,EAAK,CAAE,OAAAD,CAAM,CAAE,EAAE,KAAKG,GAAOA,EAAI,IAAI,CACvD,CACH,CCbA,MAAMC,EAAc,IAAIN,EAElBO,EAAwB,IAAIC,EAAe,0BAA2B,CAE1E,QAAS,CAAC,IAAK,GAAG,EAClB,UAAW,IACX,eAAgB,GAChB,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEKC,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,WAAW,EAC3C,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAU,EAEjD,eAAeA,EAAWC,EAAG,CAC3BA,EAAE,eAAc,EAChB,MAAMC,EAAUD,EAAE,OAAO,SAAS,MAAM,MACxCF,EAAK,SAAS,MAAM,QAAU,QAC9BI,IACA,GAAI,CACF,MAAMC,EAAa,MAAMR,EAAY,UAAUM,CAAO,EACtD,MAAMG,EAAYD,CAAU,EAC5BP,EAAsB,QAAO,EAC7BA,EAAsB,GAAG,uBAAwB,SAAUI,EAAG,CAC5D,QAAQ,IAAIA,CAAC,CACnB,CAAK,CACF,MAAe,CACdK,GACJ,QAAY,CACRP,EAAK,SAAS,MAAM,QAAU,OAC9BQ,GACD,CACH,CAEA,SAASF,EAAYG,EAAM,CACzB,GAAIA,EAAK,KAAK,SAAW,EACvB,OAAOC,EAAS,MAAM,CACpB,QACE,0EACR,CAAK,EACI,CACL,MAAMC,EAASC,EAAeH,EAAK,IAAI,EACvCT,EAAK,OAAO,UAAYW,CACzB,CACH,CAEA,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EAAO,IAAIC,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAK,CAC1B,KAAM,CACJ,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,iCACwBC,CAAa,mCAAmCG,CAAY,UAAUC,CAAI;AAAA;AAAA,+CAE5DH,CAAK;AAAA,+CACLC,CAAK;AAAA,kDACFG,CAAQ;AAAA,mDACPC,CAAS;AAAA;AAAA,UAG5D,CACA,SAASlB,GAAe,CACtBJ,EAAK,OAAO,UAAY,EAC1B,CACA,SAASQ,GAAa,CACpBR,EAAK,QAAQ,MAAQ,IACvB,CACA,SAASO,GAAc,CACrBG,EAAS,MAAM,CACb,QAAS,4CACb,CAAG,CACH"}